<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>Matchday Example / sport.db JSON(P) API</title>
  
  <script src='js/3rd/jquery-2.0.2.min.js'></script>
  <script src='js/3rd/underscore-1.4.4.min.js'></script>
  
  <script src='js/jquery.football.js'></script>

  <style>
    
    a {
      color: black;
      text-decoration: none;
    }
    
    #widget, #widget2 {
       /* background-color: lime; */
       border: 1px solid green;
       padding: 4px;
    }
  </style>
  
  <script>

    function debug( msg ) {
      if( window.console && window.console.log ) {
        window.console.log( '[debug] '+msg );
      }
    }
    
    var sportdb_widget;
    var sportdb_widget2;

    $(document).ready( function() {
      
      debug( 'enter document.ready' );
      
      // NB: sportdb_widget make it global var (that is, we do NOT use var sportdb_widget)
   
      // fix: fetch_rounds!!! via service!!!! no need to specifiy!!
   
      sportdb_widget = sportdb_widget_new( '#widget',
                                           { event: 'euro.2012',
                                             rounds: ['1', '2', '3', '4', '5', '6' ]} );


      sportdb_widget2 = sportdb_widget_new( '#widget2',
                                            { event: 'de.2012_13',
                                              rounds: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12' ],
                                              tplId: '#widgetTpl'} );
      
      $( '#widgetjq' ).football( { event: 'euro.2012',
                                   rounds: ['1', '2', '3', '4', '5', '6' ]} );
    });
  </script>

</head>
<body>

<script type='text/template' id='widgetTpl'>
<h3>
 <%= data.event.title %>
   -
 <%= data.round.title %>
</h3>
 
<table>
 <% _.each( data.games, function( game, index ) { %>
   <tr>
     <td>
      <%= game.play_at %>
     </td>
     <td style='text-align: right;'> 
       <%= game.team1_title %> (<%= game.team1_code %>)
     </td>

     <td>
      <% if( game.score1 != null && game.score2 != null ) { %>
        <% if( game.score1ot != null && game.score2ot != null ) { %>
          <% if ( game.score1p != null && game.score2p != null ) { %>
             <%= game.score1p %> - <%= game.score2p %> iE /
          <% } %>
          <%= game.score1ot %> - <%= game.score2ot %> nV /
        <% } %>
        <%= game.score1 %> - <%= game.score2 %>
      <% } else { %>
        - 
      <% } %>
     </td>
     <td>
      <%= game.team2_title %> (<%= game.team2_code %>)
     </td>
   </tr>
  <% }); %>
</table>
</script>



<h1>Matchday Example / sport.db JSON(P) API</h1>

<div id='widget'></div>

<!-- try another widget -->

<div id='widget2'></div>

<!-- try another widget -->

<div id='widgetjq'></div>

</body>
</html>
